<!DOCTYPE html>

<html lang="en">


    <head>

        <meta charset="utf-8" />

        <title>监控系统 - 自动化运维管理平台</title>

        <meta name="keywords" content="Bootstrap模版,Bootstrap模版下载,Bootstrap教程,Bootstrap中文" />

        <meta name="description" content="站长素材提供Bootstrap模版,Bootstrap教程,Bootstrap中文翻译等相关Bootstrap插件下载" />

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <!-- basic styles -->



                <link rel="stylesheet" href='/static/assets/css/bootstrap1.min.css'>

                <link rel="stylesheet" href='/static/assets/css/font-awesome.min.css'>
                <link rel="stylesheet" href='/static/css/buttons.css'>

                <script src='/static/js/echarts-2.2.7/build/dist/echarts-all.js'></script>



        <!--[if IE 7]>

          <link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css" />

        <![endif]-->



        <!-- page specific plugin styles -->



        <!-- fonts -->



       <!-- <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" /> -->

        <!-- ace styles -->



                <link rel="stylesheet" href='/static/assets/css/ace.min.css'>

                <link rel="stylesheet" href='/static/assets/css/ace-rtl.min.css'>

                <link rel="stylesheet" href='/static/assets/css/ace-skins.min.css'>



        <!--[if lte IE 8]>

          <link rel="stylesheet" href="assets/css/ace-ie.min.css" />

        <![endif]-->



        <!-- inline styles related to this page -->



        <!-- ace settings handler -->



        <script src='/static/assets/js/ace-extra.min.js'></script>



        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->



        <!--[if lt IE 9]>

        <script src="assets/js/html5shiv.js"></script>

        <script src="assets/js/respond.min.js"></script>

        <![endif]-->

    </head>




    <body>

        <div class="navbar navbar-default" id="navbar">

            <script type="text/javascript">

                try{ace.settings.check('navbar' , 'fixed')}catch(e){}

            </script>



            <div class="navbar-container" id="navbar-container">

                <div class="navbar-header pull-left">

                    <a href="#" class="navbar-brand">

                        <small>

                            <i class="icon-refresh"></i>

                            自动化运维管理平台

                        </small>

                    </a><!-- /.brand -->

                </div><!-- /.navbar-header -->



                <div class="navbar-header pull-right" role="navigation">

                    <ul class="nav ace-nav">



                        <li class="light-blue">

                            <a data-toggle="dropdown" href="#" class="dropdown-toggle">

                                <img class="nav-user-photo" src='/static/assets/avatars/user.jpg' alt="Jason's Photo" />

                                <span class="user-info">

                                    <small>欢迎您，{{ user.username }} ！</small>

                                    

                                </span>



                                <i class="icon-caret-down"></i>

                            </a>



                            <ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">

                                <li>

                                    <a href="#">

                                        <i class="icon-cog"></i>

                                        设置

                                    </a>

                                </li>



                                <li>

                                    <a href="#">

                                        <i class="icon-user"></i>

                                        个人资料

                                    </a>

                                </li>



                                <li class="divider"></li>



                                <li>

                                    <a href="/logout_user">

                                        <i class="icon-off"></i>

                                        退出

                                    </a>

                                </li>

                            </ul>

                        </li>

                    </ul><!-- /.ace-nav -->

                </div><!-- /.navbar-header -->

            </div><!-- /.container -->

        </div>



    <div class="main-container" id="main-container">

        <script type="text/javascript">

            try{ace.settings.check('main-container' , 'fixed')}catch(e){}

        </script>



        <div class="main-container-inner">

            <a class="menu-toggler" id="menu-toggler" href="#">

                <span class="menu-text"></span>

            </a>



            <div class="sidebar" id="sidebar">

                <script type="text/javascript">

                    try{ace.settings.check('sidebar' , 'fixed')}catch(e){}

                </script>



                                    <br><br>



                <ul class="nav nav-list">

                    <li>

                        <a href="service">

                            <i class="icon-dashboard"></i>

                            <span class="menu-text"> 服务台 </span>

                        </a>

                    </li>



                    <li>

                        <a href="log">

                            <i class="icon-text-width"></i>

                            <span class="menu-text"> 日志系统 </span>

                        </a>

                    </li>





                    <li>

                        <a href="#" class="dropdown-toggle">

                            <i class="icon-list"></i>

                            <span class="menu-text"> 部署</span>

                            <b class="arrow icon-angle-down"></b>

                        </a>



                        <ul class="submenu">

                            <li> 

                                <a href="/conf">

                                    <i class="icon-double-angle-right"></i>

                                    预配置

                                </a>

                            </li>



                            <li>

                                <a href="/install">

                                    <i class="icon-double-angle-right"></i>

                                    安装

                                </a>

                            </li>

                        </ul>

                    </li>



                    <li >

                        <a href="security">

                            <i class="icon-calendar"></i>



                            <span class="menu-text">

                                安全系统

                                <span class="badge badge-transparent tooltip-error" title="2&nbsp;Important&nbsp;Events">

                                    <i class="icon-warning-sign red bigger-130"></i>

                                </span>

                            </span>

                        </a>

                    </li>



                    <li class="active open">
                        <a href="#" class="dropdown-toggle">
                            <i class="icon-list"></i>
                            <span class="menu-text"> 监控系统</span>

                            <b class="arrow icon-angle-down"></b>
                        </a>

                        <ul class="submenu">
                            <li> 
                                <a href="/monitor_list">
                                    <i class="icon-double-angle-right"></i>
                                    监控主机
                                </a>
                            </li>
                            
                            <li class="active"> 
                                <a href="/monitor_info">
                                    <i class="icon-double-angle-right"></i>
                                    监控信息
                                </a>
                            </li>
                        </ul>
                    </li>



                </ul><!-- /.nav-list -->



                <div class="sidebar-collapse" id="sidebar-collapse">

                    <i class="icon-double-angle-left" data-icon1="icon-double-angle-left" data-icon2="icon-double-angle-right"></i>

                </div>



                <script type="text/javascript">

                    try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}

                </script>

            </div>



            <div class="main-content">

                <div class="breadcrumbs" id="breadcrumbs">

                    <script type="text/javascript">

                        try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}

                    </script>



                    <ul class="breadcrumb">

                        <li>

                            <i class="icon-home home-icon"></i>

                            <a href="#">首页</a>

                        </li>

                        <li class="active">部署系统</li>

                    </ul><!-- .breadcrumb -->



                    <div class="nav-search" id="nav-search">


                    </div><!-- #nav-search -->

                </div>



                <div class="page-content">

<div>
<select id="timeValue" style="width: 100px;height: 25px"  onchange="saveLast()">
<option value="1" selected="selected">1 分钟</option>
<option value="3">30 分钟</option>
<option value="6" >60 分钟</option>

</select>
<a href="/history/?hostip={{ipaddr}}&groupname={{groupname}}"  style="margin-left:550px" class="button button-glow button-border button-rounded button-royal">历史数据</a>
<a href="/monitor_info/?groupname={{groupname}}"  style="margin-left:30px" class="button button-glow button-border button-rounded button-primary">返回</a>
</div>
</br>

<div id="cpu" style="height:220px;width: 900px"></div>
<br>
<div id="cpu_wait" style="height:220px;width: 900px"></div>
<br>
<div id="mem" style="height:220px;width: 900px"></div>
<br>
<div id="net" style="height:220px;width: 900px"></div>
<br>
<div id="disk" style="height:220px;width: 900px"></div>
<!-- ECharts单文件引入 -->

<!--<script src="http://echarts.baidu.com/build/dist/echarts-all.js"></script>-->
<script type="text/javascript">
timer = null;
    // 基于准备好的dom，初始化echarts图表
function  cpuinfo(cpu_x, cpu_y, cpu_c, flag)
{
    var myChart = echarts.init(document.getElementById("cpu"));
    var option = {
        title : {
            text: 'CPU 使用率  (' + cpu_c + 'C)'
            //subtext: '测试'
        },
        tooltip : {
            trigger: 'axis'
        },
        legend: {
            data:['实时数据']
        },
        //右上角工具条
        toolbox: {
            show : false,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                magicType : {show: true, type: ['line', 'bar']},
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        calculable : true,
        xAxis : [

            {splitLine:{
　　　　show:false
　　},
                type : 'category',
                boundaryGap : false,

                data : cpu_x,
                axisLabel:{
                         interval:flag,//横轴信息全部显示
                         rotate:30,//-30度角倾斜显示
                    }
            }
        ],
        yAxis : [
            {
                type : 'value',
                axisLabel : {
                    formatter: '{value} %'
                }
            }
        ],
        series : [
            {
                name:'实时数据',
                type:'line',
                symbol:'none',
                data: cpu_y,

                markPoint : {
                    data : [
                      //  {type : 'max', name: '最大值'},
                       // {type : 'min', name: '最小值'}
                    ]

                },

                markLine : {
                    data : [
                       // {type : 'average', name: '平均值'}
                    ]
                }
            },
         ]
    };

    // 为echarts对象加载数据
    myChart.setOption(option);
}

function  cpuWaitinfo(cpu_x, cpu_y, flag)
{
    var myChart = echarts.init(document.getElementById("cpu_wait"));
    var option = {
        title : {
            text: 'CPU iowait time'
            //subtext: '测试'
        },
        tooltip : {
            trigger: 'axis'
        },
        legend: {
            data:['实时数据']
        },
        //右上角工具条
        toolbox: {
            show : false,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                magicType : {show: true, type: ['line', 'bar']},
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        calculable : true,
        xAxis : [

            {splitLine:{
　　　　show:false
　　},
                type : 'category',
                boundaryGap : false,

                data : cpu_x,
                axisLabel:{
                         interval:flag,//横轴信息全部显示
                         rotate:30,//-30度角倾斜显示
                    }
            }
        ],
        yAxis : [
            {
                type : 'value',
                axisLabel : {
                    formatter: '{value} %'
                }
            }
        ],
        series : [
            {
                name:'实时数据',
                type:'line',
                symbol:'none',
                data: cpu_y,

                markPoint : {
                    data : [
                      //  {type : 'max', name: '最大值'},
                       // {type : 'min', name: '最小值'}
                    ]

                },

                markLine : {
                    data : [
                       // {type : 'average', name: '平均值'}
                    ]
                }
            },
         ]
    };

    // 为echarts对象加载数据
    myChart.setOption(option);
}

function  meminfo(mem_x, mem_y, mem_t, flag)
{
    var myChart = echarts.init(document.getElementById("mem"));
    var option = {
        title : {
            text: '内存 使用率  (' + mem_t + 'G)'
            //subtext: '测试'
        },
        tooltip : {
            trigger: 'axis'
        },
        legend: {
            data:['实时数据']
        },
        //右上角工具条
        toolbox: {
            show : false,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                magicType : {show: true, type: ['line', 'bar']},
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        calculable : true,
        xAxis : [

            {splitLine:{
　　　　show:false
　　},
                type : 'category',
                boundaryGap : false,

                data : mem_x,
                axisLabel:{
                         interval:flag,//横轴信息全部显示
                         rotate:30,//-30度角倾斜显示
                    }
            }
        ],
        yAxis : [
            {
                type : 'value',
                axisLabel : {
                    formatter: '{value} %'
                }
            }
        ],
        series : [
            {
                name:'实时数据',
                type:'line',
                symbol:'none',
                data: mem_y,

                markPoint : {
                    data : [
                      //  {type : 'max', name: '最大值'},
                       // {type : 'min', name: '最小值'}
                    ]

                },

                markLine : {
                    data : [
                       // {type : 'average', name: '平均值'}
                    ]
                }
            },
        ]
    };

    // 为echarts对象加载数据
    myChart.setOption(option);
}


function netinfo(net_x, netIn_y, netOut_y, flag)
{
    var myChart = echarts.init(document.getElementById("net"));
    var option = {
        title : {
            text: '网卡 进出口流量'
            //subtext: '测试'
        },
        tooltip : {
            trigger: 'axis'
        },
        legend: {
            data:['入口实时数据','出口实时数据']
        },
        //右上角工具条
        toolbox: {
            show : false,
            feature : {
                mark : {show: true},
                dataView : {show: true, readOnly: false},
                magicType : {show: true, type: ['line', 'bar']},
                restore : {show: true},
                saveAsImage : {show: true}
            }
        },
        calculable : true,
        xAxis : [

            {splitLine:{
　　　　show:false
　　},
                type : 'category',
                boundaryGap : false,

                data : net_x,
                axisLabel:{
                         interval:flag,//横轴信息全部显示
                         rotate:30,//-30度角倾斜显示
                    }
            }
        ],
        yAxis : [
            {
                type : 'value',
                axisLabel : {
                    formatter: '{value} Mbps'
                }
            }
        ],
        series : [
            {
                name:'入口实时数据',
                type:'line',
                symbol:'none',
                data: netIn_y,

                markPoint : {
                    data : [
                      //  {type : 'max', name: '最大值'},
                       // {type : 'min', name: '最小值'}
                    ]

                },

                markLine : {
                    data : [
                       // {type : 'average', name: '平均值'}
                    ]
                }
            },
            {
                name:'出口实时数据',
                type:'line',
                symbol:'none',
                data:netOut_y,
                markPoint : {
                    data : [
//                        {name : '周最低', value : -2, xAxis: 1, yAxis: -1.5}
                        //{type : 'min', name: '周最低'}
                    ]
                },
                markLine : {
                    data : [
                      //  {type : 'average', name : '平均值'}
                    ]
                }
            }
        ]
    };

    // 为echarts对象加载数据
    myChart.setOption(option);
}

function diskinfo(totalSpace, useSpace, freeSpace, usePerc)
{
  var myChart = echarts.init(document.getElementById("disk"));
  option = {
      tooltip : {
           formatter: "{a} <br/>{b} : {c}%"
  },
  toolbox: {
    show : false,
    feature : {
      mark : {show: true},
      restore : {show: true},
      saveAsImage : {show: true}
    }
  },

  title : {
            text:"硬盘 使用率",
            padding: 10,
            itemGap: 70,
            subtext: "总大小: " + totalSpace + "   已使用: " + useSpace + "   剩余: " + freeSpace,
            //sublink:"http://www.cnblogs.com/highsea90/",
            //link:"http://highsea90.com",
            subtextStyle: {
                color: 'blue',          // 副标题文字颜色,
                fontSize: 18,
                borderWidth: 10
                }
          },
  series : [
    {
      name:'硬盘使用率',
      type:'gauge',
      center : ['60%', '50%'],    // 默认全局居中
      radius : [0, '75%'],
      startAngle: 140,
      endAngle : -140,
      min: 0,                     // 最小值
      max: 100,                   // 最大值
      precision: 0,               // 小数精度，默认为0，无小数点
      splitNumber: 10,             // 分割段数，默认为5
      axisLine: {            // 坐标轴线
        show: true,        // 默认显示，属性show控制显示与否
        lineStyle: {       // 属性lineStyle控制线条样式
          color: [[0.2, 'lightgreen'],[0.4, 'orange'],[0.8, 'skyblue'],[1, '#ff4500']], 
          width: 30
        }
      },
      axisTick: {            // 坐标轴小标记
        show: true,        // 属性show控制显示与否，默认不显示
        splitNumber: 5,    // 每份split细分多少段
        length :8,         // 属性length控制线长
        lineStyle: {       // 属性lineStyle控制线条样式
          color: '#eee',
          width: 1,
          type: 'solid'
        }
      },
      axisLabel: {           // 坐标轴文本标签，详见axis.axisLabel
        show: true,
        formatter: function(v){
          switch (v+''){
            case '10': return '弱';
            case '30': return '低';
            case '60': return '中';
            case '90': return '高';
            default: return '';
          }
        },
        textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
          color: '#333'
        }
      },
      splitLine: {           // 分隔线
        show: true,        // 默认显示，属性show控制显示与否
        length :30,         // 属性length控制线长
        lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
          color: '#eee',
          width: 2,
          type: 'solid'
        }
      },
      pointer : {
        length : '80%',
        width : 8,
        color : 'auto'
      },
      title : {
        show : true,
        offsetCenter: ['-65%', -10],       // x, y，单位px
        textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
          color: '#333',
          fontSize : 15
        }
      },
      detail : {
        show : true,
        backgroundColor: 'rgba(0,0,0,0)',
        borderWidth: 0,
        borderColor: '#ccc',
        width: 100,
        height: 40,
        offsetCenter: ['-60%', 10],       // x, y，单位px
        formatter:'{value}%',
        textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
          color: 'auto',
          fontSize : 30
        }
      },
      data:[{value: usePerc, name: '当前使用率'}]
    }
  ]
};
  myChart.setOption(option);

}

function saveLast() {
    var count = document.getElementById('timeValue').value;
    window.clearTimeout(timer);
    ShowData(count);
}

window.onload=ShowData(1);

function GetData(ipaddr, sleep){
  if(sleep == 1){
      var flag = 4;
  }
  else if(sleep == 3){
      var flag = 29;
  }
  else{
      var flag = 59;
  }
  var res;
  var str1 = "/monitor_data/?ipaddr=" + ipaddr + '&sleep=' + sleep;
  var req = new XMLHttpRequest();
  req.open("GET", str1);
  req.setRequestHeader("Content-Type", "text/plain;charset=UTF-8");
  req.onreadystatechange = function() {
    if(req.readyState == 4 && req.status == 200) {
      res = eval('[' + req.responseText + ']')[0];
      cpuX = res['cpuX'];
      cpuY = res['cpuY'];
      cpuCount = res['cpuCount'];
      cpuWaitX = res['cpuWaitX'];
      cpuWaitY = res['cpuWaitY'];
      memX = res['memX'];
      memY = res['memY'];
      memT = res['memT'];
      netX = res['netX'];
      netInY = res['netInY'];
      netOutY = res['netOutY'];
      totalSpace = res['totalSpace'];
      freeSpace = res['freeSpace'];
      useSpace = res['useSpace'];
      usePerc = res['usePerc'];

      cpuinfo(cpuX, cpuY, cpuCount, flag);
      cpuWaitinfo(cpuWaitX, cpuWaitY, flag);
      meminfo(memX, memY, memT, flag);
      netinfo(netX, netInY, netOutY, flag);
      diskinfo(totalSpace, useSpace, freeSpace, usePerc);
    }
  }
  req.send(null);
}

function ShowData(sleep) {
    hostip = "{{ipaddr}}";
    GetData(hostip, sleep);
    if(sleep == 1){
        var cal = 10;
    }
    else if(sleep == 3){
        var cal = 300;
    }
    else{
        var cal = 600;
    }
    timer = window.setTimeout("ShowData("+ sleep +")", 6000 * cal);
}
</script>

                </div><!-- /.page-content -->





            </div><!-- /row-fluid -->
            

        </div><!-- /span -->
        

        <!-- basic scripts -->



        <!--[if !IE]> -->



        <!--<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>

-->

        <!-- <![endif]-->



        <!--[if IE]>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

<![endif]-->



        <!--[if !IE]> -->



        <script type="text/javascript">

            window.jQuery || document.write("<script src='/static/assets/js/jquery-2.0.3.min.js'>"+"<"+"script>");

        </script>



        <!-- <![endif]-->



        <!--[if IE]>

<script type="text/javascript">

 window.jQuery || document.write("<script src='assets/js/jquery-1.10.2.min.js'>"+"<"+"script>");

</script>

<![endif]-->



        <script type="text/javascript">

            if("ontouchend" in document) document.write("<script src='/static/assets/js/jquery.mobile.custom.min.js'>"+"<"+"script>");

        </script>

                <script src="/static/assets/js/bootstrap.min.js"></script>

                <script src="/static/assets/js/typeahead-bs2.min.js"></script>



        <!-- page specific plugin scripts -->



        <!--[if lte IE 8]>

          <script src="assets/js/excanvas.min.js"></script>

        <![endif]-->



                <script src="/static/assets/js/jquery-ui-1.10.3.custom.min.js"></script>

                <script src="/static/assets/js/jquery.ui.touch-punch.min.js"></script>

                <script src="/static/assets/js/jquery.slimscroll.min.js"></script>

                <script src="/static/assets/js/jquery.easy-pie-chart.min.js"></script>

                <script src="/static/assets/js/jquery.sparkline.min.js"></script>

                <script src="/static/assets/js/flot/jquery.flot.min.js"></script>

                <script src="/static/assets/js/flot/jquery.flot.pie.min.js"></script>

                <script src="/static/assets/js/flot/jquery.flot.resize.min.js"></script>



        <!-- ace scripts -->



                <script src="/static/assets/js/ace-elements.min.js"></script>

                <script src="/static/assets/js/ace.min.js"></script>

              



        <!-- inline scripts related to this page -->



        <script type="text/javascript">

            jQuery(function($) {

                $('.easy-pie-chart.percentage').each(function(){

                    var $box = $(this).closest('.infobox');

                    var barColor = $(this).data('color') || (!$box.hasClass('infobox-dark') ? $box.css('color') : 'rgba(255,255,255,0.95)');

                    var trackColor = barColor == 'rgba(255,255,255,0.95)' ? 'rgba(255,255,255,0.25)' : '#E2E2E2';

                    var size = parseInt($(this).data('size')) || 50;

                    $(this).easyPieChart({

                        barColor: barColor,

                        trackColor: trackColor,

                        scaleColor: false,

                        lineCap: 'butt',

                        lineWidth: parseInt(size/10),

                        animate: /msie\s*(8|7|6)/.test(navigator.userAgent.toLowerCase()) ? false : 1000,

                        size: size

                    });

                })

            

                $('.sparkline').each(function(){

                    var $box = $(this).closest('.infobox');

                    var barColor = !$box.hasClass('infobox-dark') ? $box.css('color') : '#FFF';

                    $(this).sparkline('html', {tagValuesAttribute:'data-values', type: 'bar', barColor: barColor , chartRangeMin:$(this).data('min') || 0} );

                });

            

            

            

            

              var placeholder = $('#piechart-placeholder').css({'width':'90%' , 'min-height':'150px'});

              var data = [

                { label: "social networks",  data: 38.7, color: "#68BC31"},

                { label: "search engines",  data: 24.5, color: "#2091CF"},

                { label: "ad campaigns",  data: 8.2, color: "#AF4E96"},

                { label: "direct traffic",  data: 18.6, color: "#DA5430"},

                { label: "other",  data: 10, color: "#FEE074"}

              ]

              function drawPieChart(placeholder, data, position) {

                  $.plot(placeholder, data, {

                    series: {

                        pie: {

                            show: true,

                            tilt:0.8,

                            highlight: {

                                opacity: 0.25

                            },

                            stroke: {

                                color: '#fff',

                                width: 2

                            },

                            startAngle: 2

                        }

                    },

                    legend: {

                        show: true,

                        position: position || "ne", 

                        labelBoxBorderColor: null,

                        margin:[-30,15]

                    }

                    ,

                    grid: {

                        hoverable: true,

                        clickable: true

                    }

                 })

             }

             drawPieChart(placeholder, data);

            

             /**

             we saved the drawing function and the data to redraw with different position later when switching to RTL mode dynamically

             so that's not needed actually.

             */

             placeholder.data('chart', data);

             placeholder.data('draw', drawPieChart);

            

            

            

              var $tooltip = $("<div class='tooltip top in'><div class='tooltip-inner'></div></div>").hide().appendTo('body');

              var previousPoint = null;

            

              placeholder.on('plothover', function (event, pos, item) {

                if(item) {

                    if (previousPoint != item.seriesIndex) {

                        previousPoint = item.seriesIndex;

                        var tip = item.series['label'] + " : " + item.series['percent']+'%';

                        $tooltip.show().children(0).text(tip);

                    }

                    $tooltip.css({top:pos.pageY + 10, left:pos.pageX + 10});

                } else {

                    $tooltip.hide();

                    previousPoint = null;

                }

                

             });

            

                var d1 = [];

                for (var i = 0; i < Math.PI * 2; i += 0.5) {

                    d1.push([i, Math.sin(i)]);

                }

            

                var d2 = [];

                for (var i = 0; i < Math.PI * 2; i += 0.5) {

                    d2.push([i, Math.cos(i)]);

                }

            

                var d3 = [];

                for (var i = 0; i < Math.PI * 2; i += 0.2) {

                    d3.push([i, Math.tan(i)]);

                }

                

            

                var sales_charts = $('#sales-charts').css({'width':'100%' , 'height':'220px'});

                $.plot("#sales-charts", [

                    { label: "Domains", data: d1 },

                    { label: "Hosting", data: d2 },

                    { label: "Services", data: d3 }

                ], {

                    hoverable: true,

                    shadowSize: 0,

                    series: {

                        lines: { show: true },

                        points: { show: true }

                    },

                    xaxis: {

                        tickLength: 0

                    },

                    yaxis: {

                        ticks: 10,

                        min: -2,

                        max: 2,

                        tickDecimals: 3

                    },

                    grid: {

                        backgroundColor: { colors: [ "#fff", "#fff" ] },

                        borderWidth: 1,

                        borderColor:'#555'

                    }

                });

            

            

                $('#recent-box [data-rel="tooltip"]').tooltip({placement: tooltip_placement});

                function tooltip_placement(context, source) {

                    var $source = $(source);

                    var $parent = $source.closest('.tab-content')

                    var off1 = $parent.offset();

                    var w1 = $parent.width();

            

                    var off2 = $source.offset();

                    var w2 = $source.width();

            

                    if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';

                    return 'left';

                }

            

            

                $('.dialogs,.comments').slimScroll({

                    height: '300px'

                });

                

                

                //Android's default browser somehow is confused when tapping on label which will lead to dragging the task

                //so disable dragging when clicking on label

                var agent = navigator.userAgent.toLowerCase();

                if("ontouchstart" in document && /applewebkit/.test(agent) && /android/.test(agent))

                  $('#tasks').on('touchstart', function(e){

                    var li = $(e.target).closest('#tasks li');

                    if(li.length == 0)return;

                    var label = li.find('label.inline').get(0);

                    if(label == e.target || $.contains(label, e.target)) e.stopImmediatePropagation() ;

                });

            

                $('#tasks').sortable({

                    opacity:0.8,

                    revert:true,

                    forceHelperSize:true,

                    placeholder: 'draggable-placeholder',

                    forcePlaceholderSize:true,

                    tolerance:'pointer',

                    stop: function( event, ui ) {//just for Chrome!!!! so that dropdowns on items don't appear below other items after being moved

                        $(ui.item).css('z-index', 'auto');

                    }

                    }

                );

                $('#tasks').disableSelection();

                $('#tasks input:checkbox').removeAttr('checked').on('click', function(){

                    if(this.checked) $(this).closest('li').addClass('selected');

                    else $(this).closest('li').removeClass('selected');

                });

                

            

            })

        </script>

   <!-- <div style="display:none"><script src='http://v7.cnzz.com/stat.php?id=155540&web_id=155540' language='JavaScript' charset='gb2312'></script></div> -->


</body>
</html>



